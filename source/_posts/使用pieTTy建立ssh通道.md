title: 使用pieTTy建立ssh通道
date: 2015-08-06 14:27:16
categories: 技术
tags: [SSH]
---
最近实习，要访问linux服务器上的数据库，对于我这个linux也没用过，ssh也不知道是什么的人来说，可以说是一窍不通，在湖哥的指引下，最近也是对于ssh隧道的建立有了一定的了解。
##什么是ssh
>SSH 为 Secure Shell 的缩写，由 IETF 的网络工作小组（Network Working Group）所制定；SSH 为建立在应用层和传输层基础上的安全协议。SSH 是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。几乎所有UNIX平台—包括HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行SSH。

##PieTTy建立隧道
<!-- more -->
>PieTTY 是基于国外相当知名的 PuTTY 连线工具发展而来，除了改善了部份操作界面让它更简单好用之外，最重要的是改善了非英语系操作环境的多语支援，尤其针对 CJK（中文/日文/韩文）的显示与错误…等问题做了改善。
PieTTY 下载回来之后也不用安装或做任何设定，直接点两下就可以开始执行、使用，预设情况下只要输入主机名称或 IP 位址，就能马上连线、操作。
<img src="/img/piettyIndex.png"></img>
1. 勾选PuTTY mode进入设置界面，如下图所示：
<img src="/img/pietty1.png"></img>
2. 进入4中的Tunnels设置，如下图所示：
<img src="/img/pietty3.png"></img>
    我们可以看到分别有隧道入口和出口两个栏目。
    在ssh建立隧道中一般分为两种隧道，正向隧道和反向隧道。
    我们主要看"Source port","Destination"和下面的"local"、"Remote".
    Source port:隧道的入口,当下面选择为Local时,入口是在本机上的,称为"正向隧道";当下面选择为Remote时,入口是SSH主机上,成为"反向隧道".
    Destination:当选择为"Local"时,针对远程主机而言,当选择为"Remote"时,针对本机而言.
截图中"Source port":3308也就是说隧道入口是本地机器的3308端口,而"Destination":127.0.0.1:3306说明隧道出口为127.0.0.1:3306端口（linux服务器的ssh端口为22，一般在没有被占用的情况下设为出口为22的就可以访问远程服务器了）。
设置完成后别忘了add一下，这时在1和2中输入hostname或者ip和端口，在5中输入一个名称save一下就可以了，以后就可以在首界面里选择save的session名来打开建立ssh了，当然别忘了之后还有输入用户名和密码呦。
3. 注意:正向隧道与反向隧道的区别
    正向隧道:一般用于内网访问公网.
    反向隧道:一般用于公网访问内网,如果不建立反向隧道的话,防火墙会进行规则匹配,不符合的规则会全部拒绝,所以这里我们可以使用反向隧道连接,来进行穿墙表演，一般的远控木马就是利用反向连接,来进行远程控制的.